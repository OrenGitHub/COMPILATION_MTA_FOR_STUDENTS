############
# COMPILER #
############
CC=gcc

######################
# LEXER PARSER FLAGS #
######################
LEXER_PROGRAM_FLAGS   =
PARSER_PROGRAM_FLAGS  = -d -v
LEXER_INPUT_StarKist  = ./FOLDER_2_LEXER_PARSER_StarKist/StarKist.lex
PARSER_INPUT_StarKist = ./FOLDER_2_LEXER_PARSER_StarKist/StarKist.y

###############
# DIRECTORIES #
###############
BASEDIR = .
LEXER_DIR         = $(BASEDIR)/FOLDER_0_Flex
PARSER_DIR        = $(BASEDIR)/FOLDER_1_Bison
LEXER_SOURCE_DIR  = $(LEXER_DIR)/SOURCE_FILES
LEXER_HEADER_DIR  = $(LEXER_DIR)/HEADER_FILES
LEXER_OBJECT_DIR  = $(LEXER_DIR)/OBJECT_FILES
PARSER_SOURCE_DIR = $(PARSER_DIR)/SOURCE_FILES
PARSER_HEADER_DIR = $(PARSER_DIR)/HEADER_FILES
PARSER_OBJECT_DIR = $(PARSER_DIR)/OBJECT_FILES

#########
# LEXER #
#########
LEXER_FLAGS           = -I$(LEXER_HEADER_DIR) -w
LEXER_PROGRAM         = MyFlex 
LEXER_SOURCE_FILES   := $(wildcard  $(LEXER_SOURCE_DIR)/*.c)
LEXER_HEADER_FILES   := $(wildcard  $(LEXER_HEADER_DIR)/*.h)
LEXER_OBJECT_FILES   := $(addprefix $(LEXER_OBJECT_DIR)/,$(LEXER_SOURCE_FILES,.c=.o))

##########
# PARSER #
##########
PARSER_FLAGS          = -I$(PARSER_HEADER_DIR) -w
PARSER_PROGRAM        = MyBison 
PARSER_SOURCE_FILES  := $(wildcard  $(PARSER_SOURCE_DIR)/*.c)
PARSER_HEADER_FILES  := $(wildcard  $(PARSER_HEADER_DIR)/*.h)
PARSER_OBJECT_FILES  := $(addprefix $(PARSER_OBJECT_DIR)/,$(PARSER_SOURCE_FILES,.c=.o))

#########################
# StarKist LEXER PARSER #
#########################
all: 
	@$(CC) $(LEXER_FLAGS)  $(LEXER_SOURCE_FILES)  -o $(LEXER_PROGRAM)
	@$(CC) $(PARSER_FLAGS) $(PARSER_SOURCE_FILES) -o $(PARSER_PROGRAM)
	$(PARSER_PROGRAM) $(PARSER_PROGRAM_FLAGS_StarKist) $(PARSER_INPUT_StarKist)
	$(LEXER_PROGRAM)  $(LEXER_PROGRAM_FLAGS_StarKist)  $(LEXER_INPUT_StarKist)


